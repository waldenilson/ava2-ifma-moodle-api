var H5P=H5P||{};H5P.JoubelProgressCircle=(function($){function ProgressCircle(number,progressColor,fillColor,backgroundColor){progressColor=progressColor||'#1a73d9';fillColor=fillColor||'#f0f0f0';backgroundColor=backgroundColor||'#ffffff';var progressColorRGB=this.hexToRgb(progressColor);try{number=Number(number);if(number===''){throw 'is empty';}
if(isNaN(number)){throw 'is not a number';}}catch(e){number='err';}
if(number>100){number=100;}
var progressColorString='rgb('+parseInt(progressColorRGB.r,10)+
','+parseInt(progressColorRGB.g,10)+
','+parseInt(progressColorRGB.b,10)+')';var $wrapper=$('<div/>',{'class':"joubel-progress-circle-wrapper"});var $activeBorder=$('<div/>',{'class':"joubel-progress-circle-active-border"}).appendTo($wrapper);var $backgroundCircle=$('<div/>',{'class':"joubel-progress-circle-circle"}).appendTo($activeBorder);$('<span/>',{'text':number+'%','class':"joubel-progress-circle-percentage"}).appendTo($backgroundCircle);var deg=number*3.6;if(deg<=180){$activeBorder.css('background-image','linear-gradient('+(90+deg)+'deg, transparent 50%, '+fillColor+' 50%),'+
'linear-gradient(90deg, '+fillColor+' 50%, transparent 50%)').css('border','2px solid'+backgroundColor).css('background-color',progressColorString);}else{$activeBorder.css('background-image','linear-gradient('+(deg-90)+'deg, transparent 50%, '+progressColorString+' 50%),'+
'linear-gradient(90deg, '+fillColor+' 50%, transparent 50%)').css('border','2px solid'+backgroundColor).css('background-color',progressColorString);}
this.$activeBorder=$activeBorder;this.$backgroundCircle=$backgroundCircle;this.$wrapper=$wrapper;this.initResizeFunctionality();return $wrapper;}
ProgressCircle.prototype.initResizeFunctionality=function(){var self=this;$(window).resize(function(){setTimeout(function(){self.resize();});});setTimeout(function(){self.resize();},0);};ProgressCircle.prototype.resize=function(){var $parent=this.$wrapper.parent();if($parent!==undefined&&$parent){var fontSize=parseInt($parent.css('font-size'),10);var fontSizeMultiplum=3.75;var progressCircleWidthPx=parseInt((fontSize/4.5),10)%2===0?parseInt((fontSize/4.5),10)+4:parseInt((fontSize/4.5),10)+5;var progressCircleOffset=progressCircleWidthPx/2;var width=fontSize*fontSizeMultiplum;var height=fontSize*fontSizeMultiplum;this.$activeBorder.css({'width':width,'height':height});this.$backgroundCircle.css({'width':width-progressCircleWidthPx,'height':height-progressCircleWidthPx,'top':progressCircleOffset,'left':progressCircleOffset});}};ProgressCircle.prototype.hexToRgb=function(hex){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?{r:parseInt(result[1],16),g:parseInt(result[2],16),b:parseInt(result[3],16)}:null;};return ProgressCircle;}(H5P.jQuery));